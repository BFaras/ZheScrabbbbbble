<div class="container">
    <p class="message">Bienvenue sur la page Admin üòé</p>
    <p *ngIf="!dictList.length" class="message error">Le serveur ou la base de donn√©es n'est pas disponible en ce moment, sowwy ü•∫</p>
    <button class="button cancel" routerLink="">Retourner au menu principal</button>
    <section class="box dict">
        <p class="message">Modifier les dictionnaires</p>
        <br />
        <div class="name-container">
            <div *ngFor="let dict of dictList" class="one-name" id="{{ dict.title }}">
                <span>{{ dict.title }} </span>
                <section>
                    <button class="button download" (click)="downloadDictionary(dict.title)">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                            <path
                                d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"
                            />
                            <path
                                d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"
                            />
                        </svg>
                    </button>
                    <button class="button" (click)="formType = 'description'" (click)="dictData.description = dict.description" (click)="openForm()">
                        description
                    </button>
                    <button
                        *ngIf="dict.title !== 'Mon dictionnaire'"
                        class="button"
                        (click)="formType = 'dictionary'"
                        (click)="dictData.title = dict.title"
                        (click)="dictData.description = dict.description"
                        (click)="openForm()"
                    >
                        modifier
                    </button>
                    <button
                        *ngIf="dict.title !== 'Mon dictionnaire'"
                        id="supprimer-dict"
                        class="button"
                        (click)="formType = 'delete'"
                        (click)="dictData.title = dict.title"
                        (click)="deleteDict()"
                    >
                        supprimer
                    </button>
                </section>
            </div>
        </div>
    </section>
    <section class="box add">
        <p class="message">T√©l√©verser un nouveau dictionnaire</p>
        <br />
        <form class="add" (ngSubmit)="submitFile(dictInput)">
            <input #dictInput type="file" id="myFile" accept=".json" name="filename" (change)="getFile($event)" />
            <!-- <div class="button">
                explorer
               <input type="file" class="hide_file">
            </div> -->
            <input class="button" type="submit" value="soumettre" />
        </form>
    </section>
    <section class="box player">
        <p class="message">Modifier les noms des joueurs virtuels</p>
        <div class="name-container">
            <div *ngFor="let vp of virtualPlayers" class="one-name" id="vp">
                <span>{{ vp.name }} : {{ vp.difficulty }}</span>
                <section *ngIf="!vp.default">
                    <button
                        class="button"
                        (click)="formType = 'virtualPlayer'"
                        (click)="virtualPlayerData.vpName = vp.name"
                        (click)="virtualPlayerData.vpDifficulty = vp.difficulty"
                        (click)="openForm()"
                    >
                        modifier
                    </button>
                    <button
                        class="button"
                        id="supprimer-vp"
                        (click)="virtualPlayerData.vpName = vp.name"
                        (click)="formType = 'delete'"
                        (click)="deleteVirtualPlayer()"
                    >
                        supprimer
                    </button>
                </section>
            </div>
        </div>
        <div id="add-vp">
            <span>Ajouter un joueur virtuel</span>
            <button class="button" (click)="formType = 'virtualPlayer'" (click)="openForm()">ajouter</button>
        </div>
    </section>
    <section class="box games">
        <p class="message">Historique des parties</p>
        <div id="history">
            <table>
                <thead>
                    <tr>
                        <th class="titles" *ngFor="let column of columns">{{ column }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let game of gameHistory">
                        <td class="row">{{ game.date }}</td>
                        <td class="row">{{ game.time }}</td>
                        <td class="row">{{ game.length }}</td>
                        <td class="row player1" [ngClass]="game.player1.winner ? 'winner' : 'loser'">{{ game.player1.name }}</td>
                        <td class="row player1" [ngClass]="game.player1.winner ? 'winner' : 'loser'">{{ game.player1.score }}</td>
                        <td class="row player1" [ngClass]="game.player1.winner ? 'winner' : 'loser'" *ngIf="game.player1.virtual">
                            {{ game.player1.difficulty }}
                        </td>
                        <td class="row player1" [ngClass]="game.player1.winner ? 'winner' : 'loser'" *ngIf="!game.player1.virtual">non</td>
                        <td class="row player2" [ngClass]="game.player2.winner ? 'winner' : 'loser'">{{ game.player2.name }}</td>
                        <td class="row player2" [ngClass]="game.player2.winner ? 'winner' : 'loser'">{{ game.player2.score }}</td>
                        <td class="row player2" [ngClass]="game.player2.winner ? 'winner' : 'loser'" *ngIf="game.player2.virtual">
                            {{ game.player2.difficulty }}
                        </td>
                        <td class="row player2" [ngClass]="game.player2.winner ? 'winner' : 'loser'" *ngIf="!game.player2.virtual">non</td>
                        <td class="row">{{ game.mode }}</td>
                        <td class="row" *ngIf="game.abandoned">oui</td>
                        <td class="row" *ngIf="game.abandoned === false">non</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <section id="legend">
            <p class="winner">gagnant</p>
            <p class="loser">perdant</p>
        </section>
    </section>
    <div class="box reset">
        <p class="message">R√©initialisation des donn√©es</p>
        <br />
        <div class="name-container reset">
            <section class="one-name">
                <span>R√©initialiser les dictionnaires </span>
                <button
                    class="button"
                    (click)="
                        alertResetType(
                            '√ätes-vous s√ªr(e) de vouloir r√©initialiser tous les dictionnaires? Tout sera perdu sauf les trois dictionnaires par d√©faut. Cela prendra environ 10 secondes.',
                            databaseType.DICTIONARY
                        )
                    "
                    id="reset-btn-dict"
                >
                    r√©initialiser
                </button>
            </section>
            <section class="one-name">
                <span>R√©initialiser les joueurs virtuels </span>
                <button
                    class="button"
                    (click)="
                        alertResetType(
                            '√ätes-vous s√ªr(e) de vouloir r√©initialiser tous les joueurs virtuels? Tout sera perdu sauf les joueurs par d√©faut.',
                            databaseType.NAMES
                        )
                    "
                    id="reset-btn-vp"
                >
                    r√©initialiser
                </button>
            </section>
            <section class="one-name">
                <span>R√©initialiser les parties </span>
                <button
                    class="button"
                    (click)="
                        alertResetType(
                            '√ätes-vous s√ªr(e) de vouloir r√©initialiser toutes les parties? Tout sera perdu sauf les valeurs par d√©faut.',
                            databaseType.GAMES
                        )
                    "
                    id="reset-btn-games"
                >
                    r√©initialiser
                </button>
            </section>
            <section class="one-name">
                <span>R√©initialiser les meilleurs scores </span>
                <button
                    class="button"
                    (click)="
                        alertResetType(
                            '√ätes-vous s√ªr(e) de vouloir r√©initialiser tous les meilleurs scores? Tout sera perdu sauf les valeurs par d√©faut.',
                            databaseType.SCORE
                        )
                    "
                    id="reset-btn-scores"
                >
                    r√©initialiser
                </button>
            </section>
            <section class="one-name">
                <span>R√©initialiser tout </span>
                <button class="button" (click)="alertResetAll()" id="reset-btn-all">r√©initialiser</button>
            </section>
        </div>
    </div>

    <p class="message">En esp√©rant que vous n'ayez pas fait de b√™tises ü§®</p>
</div>
